#!/bin/bash

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘  IDENTIFICAR CONTA ATA QUE PRECISA DE SOL                                â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Recipient do Solana (dos logs)
RECIPIENT="BirXd4QDxfq2vx9LGqgXXSgZrjT81rhoFGUbQRWDEf1j"
RELAYER_ADDRESS="C4jCuG3DjRdAnDJkJLXn711ShWDiat5nSTAZKYzPPCnY"

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“‹ INFORMAÃ‡Ã•ES DAS CONTAS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "Relayer (signer principal - account_index: 0):"
echo "  $RELAYER_ADDRESS"
echo "  Saldo atual: $(solana balance $RELAYER_ADDRESS --url https://api.testnet.solana.com 2>&1 | grep -oE '[0-9]+\.[0-9]+' | head -1) SOL"
echo ""

echo "Recipient (destinatÃ¡rio da mensagem):"
echo "  $RECIPIENT"
echo "  Saldo atual: $(solana balance $RECIPIENT --url https://api.testnet.solana.com 2>&1 | grep -oE '[0-9]+\.[0-9]+' | head -1 || echo '0') SOL"
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ’¡ ANÃLISE"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "O erro 'account_index: 5' indica que a 5Âª conta na transaÃ§Ã£o nÃ£o tem SOL."
echo "Essa conta Ã© a Associated Token Account (ATA) que estÃ¡ sendo criada."
echo ""
echo "A ATA Ã© derivada do recipient e do mint token. O problema Ã© que quando"
echo "o relayer tenta criar a ATA, ela precisa de SOL para rent exemption."
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ”§ SOLUÃ‡ÃƒO"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "OPÃ‡ÃƒO 1: Transferir SOL para o RECIPIENT"
echo "  O recipient pode precisar de SOL para que a ATA seja criada:"
echo "  solana transfer $RECIPIENT 0.1 --url https://api.testnet.solana.com"
echo ""

echo "OPÃ‡ÃƒO 2: O relayer deveria transferir SOL automaticamente"
echo "  O problema Ã© que o relayer nÃ£o estÃ¡ fazendo isso. Isso pode ser"
echo "  um bug na versÃ£o 1.7.0 do Hyperlane."
echo ""

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ğŸ“‹ PRÃ“XIMOS PASSOS"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

echo "1. Tentar transferir 0.1 SOL para o recipient:"
echo "   solana transfer $RECIPIENT 0.1 --url https://api.testnet.solana.com"
echo ""
echo "2. Reiniciar o relayer"
echo ""
echo "3. Monitorar se o erro persiste"

