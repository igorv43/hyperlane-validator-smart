services:
  relayer:
    build:
      context: .
      dockerfile: Dockerfile.hyperlane
    container_name: hyperlane-relayer
    restart: unless-stopped
    command:
      - relayer
      - --config
      - /hyperlane/config
      - --db
      - /hyperlane/db
      - --allowLocalCheckpointSyncers
      - "false"
      - --metrics
      - 0.0.0.0:9090
      - --api
      - 0.0.0.0:9090
    volumes:
      - ./hyperlane:/hyperlane
      - relayer-data:/hyperlane/db
    ports:
      - "9090:9090"

  validator-terraclassic:
    build:
      context: .
      dockerfile: Dockerfile.hyperlane
    container_name: hyperlane-validator-terraclassic
    restart: unless-stopped
    command:
      - validator
      - --config
      - /hyperlane/config
      - --db
      - /hyperlane/db
      - --originChainName
      - terraclassic
    volumes:
      - ./hyperlane:/hyperlane
      - validator-terraclassic-data:/hyperlane/db
    ports:
      - "9091:9090"

volumes:
  relayer-data:
  validator-terraclassic-data:
